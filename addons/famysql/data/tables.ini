CREATE TABLE IF NOT EXISTS `__PREFIX__area` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(50) DEFAULT NULL COMMENT '名称',
  `pid` int(11) DEFAULT '0' COMMENT '上级',
  `level` int(11) DEFAULT '1',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci COMMENT='省市区数据';

CREATE TABLE IF NOT EXISTS `__PREFIX__cart` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT 'ID',
  `user_id` int(10) NOT NULL DEFAULT '0' COMMENT '用户ID',
  `shop_id` int(10) NOT NULL DEFAULT '0' COMMENT '店铺ID',
  `goods_id` int(10) NOT NULL DEFAULT '0' COMMENT '商品ID',
  `goods_num` int(10) unsigned NOT NULL DEFAULT '1' COMMENT '购物车数量',
  `sku_price_id` int(11) DEFAULT NULL COMMENT '规格',
  `createtime` bigint(16) DEFAULT NULL COMMENT '创建时间',
  `updatetime` bigint(16) DEFAULT NULL COMMENT '更新时间',
  `deletetime` bigint(16) DEFAULT NULL COMMENT '删除时间',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci COMMENT='购物车表';

CREATE TABLE IF NOT EXISTS `__PREFIX__category` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `pid` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '父ID',
  `type` enum('article','goods') COLLATE utf8mb4_general_ci NOT NULL COMMENT '类型',
  `name` varchar(30) COLLATE utf8mb4_general_ci NOT NULL DEFAULT '' COMMENT '名称',
  `name_spacer` varchar(0) COLLATE utf8mb4_general_ci DEFAULT '' COMMENT '存放目录结构',
  `image` varchar(100) COLLATE utf8mb4_general_ci NOT NULL DEFAULT '' COMMENT '图片',
  `flag` set('hot','new','recommend') COLLATE utf8mb4_general_ci DEFAULT '' COMMENT '标志',
  `isnav` tinyint(1) NOT NULL DEFAULT '1' COMMENT '是否导航显示',
  `createtime` bigint(16) DEFAULT NULL COMMENT '创建时间',
  `updatetime` bigint(16) DEFAULT NULL COMMENT '更新时间',
  `weigh` int(10) NOT NULL DEFAULT '0' COMMENT '权重',
  `status` enum('normal','hidden') COLLATE utf8mb4_general_ci DEFAULT 'normal' COMMENT '状态',
  PRIMARY KEY (`id`),
  KEY `weigh` (`weigh`) USING BTREE,
  KEY `parent_id` (`pid`) USING BTREE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci COMMENT='商品、文章类目表';

CREATE TABLE IF NOT EXISTS `__PREFIX__config` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(30) NOT NULL DEFAULT '' COMMENT '变量名',
  `group` varchar(30) NOT NULL DEFAULT '' COMMENT '分组',
  `title` varchar(100) NOT NULL DEFAULT '' COMMENT '变量标题',
  `tip` varchar(100) NOT NULL DEFAULT '' COMMENT '变量描述',
  `type` varchar(30) NOT NULL DEFAULT '' COMMENT '类型:string,text,int,bool,array,datetime,date,file',
  `value` longtext NOT NULL COMMENT '变量值',
  `content` longtext CHARACTER SET utf8mb4 COMMENT '变量字典数据',
  `rule` varchar(100) NOT NULL DEFAULT '' COMMENT '验证规则',
  `extend` varchar(255) NOT NULL DEFAULT '' COMMENT '扩展属性',
  PRIMARY KEY (`id`) USING BTREE,
  UNIQUE KEY `name` (`name`) USING BTREE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci COMMENT='配置';

CREATE TABLE IF NOT EXISTS `__PREFIX__faq` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `title` varchar(255) DEFAULT NULL COMMENT '标题',
  `content` longtext COMMENT '内容',
  `createtime` bigint(16) DEFAULT NULL COMMENT '创建时间',
  `updatetime` bigint(16) DEFAULT NULL COMMENT '更新时间',
  `deletetime` bigint(16) DEFAULT NULL COMMENT '删除时间',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci COMMENT='常见问题';

CREATE TABLE IF NOT EXISTS `__PREFIX__feedback` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `user_id` int(11) NOT NULL COMMENT '反馈用户',
  `type` varchar(30) DEFAULT NULL COMMENT '反馈类型',
  `content` varchar(255) DEFAULT NULL COMMENT '反馈内容',
  `images` varchar(512) DEFAULT NULL COMMENT '图片',
  `phone` varchar(30) DEFAULT NULL COMMENT '联系电话',
  `status` tinyint(4) NOT NULL DEFAULT '0' COMMENT '是否处理:0=未处理,1=已处理',
  `remark` varchar(191) DEFAULT NULL COMMENT '处理备注',
  `createtime` bigint(16) DEFAULT NULL COMMENT '创建时间',
  `updatetime` bigint(16) DEFAULT NULL COMMENT '更新时间',
  `deletetime` bigint(16) DEFAULT NULL COMMENT '删除时间',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci COMMENT='意见反馈';

CREATE TABLE IF NOT EXISTS `__PREFIX__goods` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT 'ID',
  `shop_id` int(10) unsigned DEFAULT '0' COMMENT '店铺ID',
  `shop_category_id` varchar(100) COLLATE utf8mb4_general_ci DEFAULT NULL COMMENT '店铺内类目',
  `category_id` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '商品类目',
  `brand_id` int(10) unsigned DEFAULT '0' COMMENT '品牌ID',
  `category_attribute` longtext COLLATE utf8mb4_general_ci COMMENT '类目属性',
  `title` varchar(100) COLLATE utf8mb4_general_ci NOT NULL DEFAULT '' COMMENT '商品标题',
  `image` varchar(100) COLLATE utf8mb4_general_ci NOT NULL DEFAULT '' COMMENT '商品主图',
  `images` varchar(1500) COLLATE utf8mb4_general_ci NOT NULL DEFAULT '' COMMENT '产品相册',
  `description` varchar(255) COLLATE utf8mb4_general_ci NOT NULL DEFAULT '' COMMENT '商品描述',
  `flag` set('hot','index','recommend') COLLATE utf8mb4_general_ci NOT NULL DEFAULT '' COMMENT '标志(多选):hot=热门,index=首页,recommend=推荐',
  `stock` enum('porder','payment') COLLATE utf8mb4_general_ci NOT NULL DEFAULT 'porder' COMMENT '库存计算方式:porder=下单减库存,payment=付款减库存',
  `content` longtext COLLATE utf8mb4_general_ci NOT NULL COMMENT '商品详情',
  `freight_id` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '运费模板',
  `grounding` tinyint(1) NOT NULL DEFAULT '0' COMMENT '上架状态',
  `specs` enum('single','multi') COLLATE utf8mb4_general_ci NOT NULL DEFAULT 'single' COMMENT '商品规格:single=单规格,multi=多规格',
  `distribution` enum('true','false') COLLATE utf8mb4_general_ci NOT NULL DEFAULT 'false' COMMENT '是否独立分销:true=开启,false=关闭',
  `activity` enum('0','1') COLLATE utf8mb4_general_ci NOT NULL DEFAULT '0' COMMENT '活动中:0=没在活动中,1=活动中',
  `activity_id` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '活动ID',
  `activity_type` enum('goods','groups','seckill','bargain') COLLATE utf8mb4_general_ci NOT NULL DEFAULT 'goods' COMMENT '活动类型:goods=商品,groups=拼团,seckill=秒杀,bargain=砍价',
  `views` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '点击',
  `price` decimal(10,2) DEFAULT '0.00' COMMENT '产品价格',
  `sales` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '销量',
  `payment` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '付款人数',
  `comment` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '评论',
  `praise` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '好评',
  `moderate` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '中评',
  `negative` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '差评',
  `like` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '收藏',
  `weigh` int(10) NOT NULL DEFAULT '0' COMMENT '权重',
  `createtime` bigint(16) DEFAULT NULL COMMENT '创建时间',
  `updatetime` bigint(16) DEFAULT NULL COMMENT '更新时间',
  `deletetime` bigint(16) DEFAULT NULL COMMENT '删除时间',
  `status` enum('normal','hidden') COLLATE utf8mb4_general_ci DEFAULT 'normal' COMMENT '状态',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci COMMENT='商品表';

CREATE TABLE IF NOT EXISTS `__PREFIX__comment` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT 'ID',
  `user_id` int(10) NOT NULL DEFAULT '0' COMMENT '用员ID',
  `shop_id` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '店铺ID',
  `order_id` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '订单ID',
  `goods_id` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '商品ID',
  `order_type` enum('goods','groups','seckill') COLLATE utf8mb4_general_ci DEFAULT 'goods' COMMENT '订单类型:goods=普通订单,groups=拼团订单,seckill=秒杀订单',
  `order_goods_id` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '订单商品ID',
  `state` enum('0','1','2') COLLATE utf8mb4_general_ci NOT NULL DEFAULT '1' COMMENT '评价:0=好评,1=中评,2=差评',
  `content` text COLLATE utf8mb4_general_ci COMMENT '内容',
  `tag` varchar(500) COLLATE utf8mb4_general_ci DEFAULT NULL COMMENT '评论标签',
  `suk` text COLLATE utf8mb4_general_ci NOT NULL COMMENT '所购买商品SUK',
  `images` varchar(1500) COLLATE utf8mb4_general_ci DEFAULT NULL COMMENT '图片组',
  `score` float(3,1) unsigned DEFAULT '0.0' COMMENT '综合评分',
  `score_describe` float(3,1) unsigned DEFAULT '0.0' COMMENT '描述相符',
  `score_service` float(3,1) unsigned DEFAULT '0.0' COMMENT '服务相符',
  `score_deliver` float(3,1) unsigned DEFAULT '0.0' COMMENT '发货相符',
  `score_logistics` float(3,1) unsigned DEFAULT '0.0' COMMENT '物流相符',
  `switch` tinyint(1) DEFAULT '0' COMMENT '匿名评论',
  `createtime` bigint(16) DEFAULT NULL COMMENT '创建时间',
  `updatetime` bigint(16) DEFAULT NULL COMMENT '更新时间',
  `deletetime` bigint(16) DEFAULT NULL COMMENT '删除时间',
  `status` enum('normal','hidden') COLLATE utf8mb4_general_ci DEFAULT 'normal' COMMENT '状态',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci COMMENT='商品评论';

CREATE TABLE IF NOT EXISTS `__PREFIX__follow` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT 'ID',
  `user_id` int(10) unsigned DEFAULT '0' COMMENT '用户ID',
  `goods_id` int(10) unsigned DEFAULT '0' COMMENT '商品ID',
  `goods_type` enum('goods','groups','seckill') COLLATE utf8mb4_general_ci DEFAULT 'goods' COMMENT '商品类型:goods=普通商品,groups=拼团商品,seckill=秒杀商品',
  `createtime` bigint(16) DEFAULT NULL COMMENT '创建时间',
  `updatetime` bigint(16) DEFAULT NULL COMMENT '更新时间',
  `deletetime` bigint(16) DEFAULT NULL COMMENT '删除时间',
  `status` enum('normal','hidden') COLLATE utf8mb4_general_ci DEFAULT 'normal' COMMENT '状态',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci COMMENT='关注商品表';

CREATE TABLE IF NOT EXISTS `__PREFIX__goods_sku` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(50) DEFAULT NULL COMMENT '名称',
  `pid` int(11) NOT NULL DEFAULT '0' COMMENT '所属规格',
  `goods_id` int(11) NOT NULL COMMENT '产品',
  `weigh` int(11) NOT NULL DEFAULT '0' COMMENT '排序',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci COMMENT='商品规格';

CREATE TABLE IF NOT EXISTS `__PREFIX__goods_sku_price` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `goods_sku_ids` varchar(255) DEFAULT NULL,
  `goods_id` int(11) NOT NULL COMMENT '所属产品',
  `weigh` int(11) NOT NULL DEFAULT '0' COMMENT '排序',
  `image` varchar(255) DEFAULT NULL COMMENT '缩略图',
  `stock` int(11) NOT NULL DEFAULT '0' COMMENT '库存',
  `stock_warning` int(11) DEFAULT NULL COMMENT '库存预警',
  `sales` int(11) NOT NULL DEFAULT '0' COMMENT '已售',
  `sn` varchar(50) DEFAULT NULL COMMENT '货号',
  `weight` int(11) DEFAULT NULL COMMENT '重量(kg)',
  `price` decimal(10,2) NOT NULL DEFAULT '0.00' COMMENT '价格',
  `goods_sku_text` varchar(255) DEFAULT NULL COMMENT '中文规格',
  `status` varchar(10) DEFAULT 'up' COMMENT '状态',
  `createtime` bigint(16) DEFAULT NULL,
  `updatetime` bigint(16) DEFAULT NULL,
  `deletetime` bigint(16) DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci COMMENT='商品规格';

CREATE TABLE IF NOT EXISTS `__PREFIX__link` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT 'ID',
  `type` enum('system','activity','user','product','page') COLLATE utf8mb4_general_ci NOT NULL DEFAULT 'system' COMMENT '页面类型:system=系统,activity=活动,user=用户中心,product=商品,page=自定义页面',
  `title` varchar(50) COLLATE utf8mb4_general_ci NOT NULL DEFAULT '' COMMENT '页面标题',
  `route` varchar(100) COLLATE utf8mb4_general_ci NOT NULL DEFAULT '' COMMENT '路径',
  `createtime` bigint(16) DEFAULT NULL COMMENT '创建时间',
  `updatetime` bigint(16) DEFAULT NULL COMMENT '更新时间',
  `deletetime` bigint(16) DEFAULT NULL COMMENT '删除时间',
  `weigh` int(10) NOT NULL DEFAULT '0' COMMENT '权重',
  `status` enum('normal','hidden') COLLATE utf8mb4_general_ci NOT NULL DEFAULT 'normal' COMMENT '状态',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci COMMENT='页面链接';

CREATE TABLE IF NOT EXISTS `__PREFIX__order` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `type` enum('goods','score') NOT NULL DEFAULT 'goods' COMMENT '订单类型:goods=商城订单,score=积分商城订单',
  `order_sn` varchar(60) NOT NULL COMMENT '订单号',
  `user_id` int(11) DEFAULT '0' COMMENT '用户',
  `activity_type` varchar(255) DEFAULT NULL COMMENT '活动类型',
  `goods_amount` decimal(10,2) NOT NULL DEFAULT '0.00' COMMENT '商品总价',
  `dispatch_amount` decimal(10,2) NOT NULL DEFAULT '0.00' COMMENT '总运费',
  `phone` varchar(20) DEFAULT NULL COMMENT '联系电话',
  `consignee` varchar(20) DEFAULT NULL COMMENT '收货人',
  `province_name` varchar(20) DEFAULT NULL COMMENT '省',
  `city_name` varchar(20) DEFAULT NULL COMMENT '市',
  `area_name` varchar(20) DEFAULT NULL COMMENT '区',
  `address` varchar(255) DEFAULT NULL COMMENT '详细地址',
  `province_id` int(11) NOT NULL DEFAULT '0',
  `city_id` int(11) NOT NULL DEFAULT '0',
  `area_id` int(11) NOT NULL DEFAULT '0',
  `status` tinyint(2) NOT NULL DEFAULT '0' COMMENT '订单状态:-2=交易关闭,-1=已取消,0=未支付,1=已支付,2=已完成',
  `invoice_status` enum('-1','0','1') NOT NULL DEFAULT '-1' COMMENT '发票开具状态:-1=不可开具,0=未申请,1=已申请',
  `memo` varchar(255) DEFAULT NULL COMMENT '商户备注',
  `remark` varchar(255) DEFAULT NULL COMMENT '用户备注',
  `total_amount` decimal(10,2) NOT NULL DEFAULT '0.00' COMMENT '订单总金额',
  `score_amount` int(11) NOT NULL DEFAULT '0' COMMENT '积分总数',
  `total_fee` decimal(10,2) NOT NULL DEFAULT '0.00' COMMENT '支付金额',
  `last_total_fee` decimal(10,2) NOT NULL DEFAULT '0.00' COMMENT '改价前金额',
  `discount_fee` decimal(10,2) NOT NULL DEFAULT '0.00' COMMENT '折扣总金额',
  `coupon_fee` decimal(10,2) NOT NULL DEFAULT '0.00' COMMENT '优惠券抵用金额',
  `activity_discount_money` decimal(10,2) NOT NULL DEFAULT '0.00' COMMENT '活动优惠',
  `dispatch_discount_money` decimal(10,2) NOT NULL DEFAULT '0.00' COMMENT '运费优惠',
  `pay_fee` decimal(10,2) NOT NULL DEFAULT '0.00' COMMENT '实际支付金额',
  `score_fee` int(11) NOT NULL DEFAULT '0' COMMENT '积分支付数',
  `goods_original_amount` decimal(10,2) NOT NULL DEFAULT '0.00' COMMENT '商品原价',
  `coupons_id` int(11) NOT NULL DEFAULT '0' COMMENT '优惠券 id',
  `transaction_id` varchar(60) DEFAULT NULL COMMENT '交易单号',
  `payment_json` varchar(2500) DEFAULT NULL COMMENT '交易原始数据',
  `pay_type` enum('wechat','alipay','wallet','score') DEFAULT NULL COMMENT '支付方式:wechat=微信支付,alipay=支付宝,wallet=钱包支付,score=积分支付',
  `paytime` bigint(16) DEFAULT NULL COMMENT '支付时间',
  `ext` varchar(2048) DEFAULT NULL COMMENT '附加字段',
  `platform` enum('H5','App','wxOfficialAccount','wxMiniProgram') DEFAULT NULL COMMENT '平台:H5=H5,wxOfficialAccount=微信公众号,wxMiniProgram=微信小程序,App=App',
  `createtime` bigint(16) DEFAULT NULL COMMENT '创建时间',
  `updatetime` bigint(16) DEFAULT NULL COMMENT '更新时间',
  `deletetime` bigint(16) DEFAULT NULL COMMENT '删除时间',
  PRIMARY KEY (`id`) USING BTREE,
  UNIQUE KEY `order_sn` (`order_sn`) USING BTREE,
  KEY `user_id` (`user_id`) USING BTREE,
  KEY `status` (`status`) USING BTREE,
  KEY `createtime` (`createtime`) USING BTREE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci COMMENT='订单管理';

CREATE TABLE IF NOT EXISTS `__PREFIX__order_aftersale` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `aftersale_sn` varchar(40) NOT NULL COMMENT '售后单号',
  `user_id` int(11) NOT NULL DEFAULT '0' COMMENT '用户',
  `type` varchar(20) NOT NULL COMMENT '类型:refund=退款,return=退货,other=其他',
  `phone` varchar(20) DEFAULT NULL COMMENT '联系方式',
  `activity_id` int(11) DEFAULT NULL COMMENT '活动',
  `activity_type` varchar(255) DEFAULT NULL COMMENT '活动类型',
  `order_id` int(11) NOT NULL DEFAULT '0' COMMENT '订单',
  `order_item_id` int(11) NOT NULL DEFAULT '0' COMMENT '订单商品',
  `goods_id` int(11) NOT NULL DEFAULT '0' COMMENT '商品',
  `goods_sku_price_id` int(11) NOT NULL DEFAULT '0' COMMENT '规格 id',
  `goods_sku_text` varchar(30) DEFAULT NULL COMMENT '规格名',
  `goods_title` varchar(255) DEFAULT NULL COMMENT '商品名称',
  `goods_image` varchar(255) DEFAULT NULL COMMENT '商品图片',
  `goods_original_price` decimal(10,2) NOT NULL COMMENT '商品原价',
  `discount_fee` decimal(10,2) DEFAULT NULL COMMENT '优惠费用',
  `goods_price` decimal(10,2) NOT NULL COMMENT '商品价格',
  `goods_num` int(11) NOT NULL DEFAULT '0' COMMENT '购买数量',
  `dispatch_status` tinyint(2) NOT NULL DEFAULT '0' COMMENT '发货状态:0=未发货,1=已发货,2=已收货',
  `dispatch_fee` decimal(10,2) DEFAULT NULL COMMENT '发货费用',
  `aftersale_status` tinyint(2) NOT NULL COMMENT '售后状态:-1=拒绝,0=未处理,1=处理中,2=售后完成',
  `refund_status` tinyint(1) DEFAULT NULL COMMENT '退款状态:-1=拒绝退款,0=未退款,1=同意',
  `refund_fee` decimal(10,2) DEFAULT NULL COMMENT '退款金额',
  `createtime` bigint(16) DEFAULT NULL COMMENT '添加时间',
  `updatetime` bigint(16) DEFAULT NULL COMMENT '更新时间',
  `deletetime` bigint(16) DEFAULT NULL COMMENT '删除时间',
  PRIMARY KEY (`id`) USING BTREE,
  UNIQUE KEY `aftersale_sn` (`aftersale_sn`) USING BTREE,
  KEY `user_id` (`user_id`) USING BTREE,
  KEY `order_id` (`order_id`) USING BTREE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci COMMENT='售后单';

CREATE TABLE IF NOT EXISTS `__PREFIX__order_item` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `user_id` int(11) DEFAULT NULL COMMENT '用户',
  `order_id` int(11) NOT NULL DEFAULT '0' COMMENT '订单',
  `goods_id` int(11) NOT NULL DEFAULT '0' COMMENT '商品',
  `goods_type` varchar(30) NOT NULL DEFAULT 'normal' COMMENT '商品类型:normal=实体商品,virtual=虚拟商品',
  `goods_sku_price_id` int(11) NOT NULL DEFAULT '0' COMMENT '规格 id',
  `activity_id` int(11) NOT NULL DEFAULT '0' COMMENT '活动 id',
  `activity_type` varchar(255) DEFAULT NULL COMMENT '活动类型',
  `item_goods_sku_price_id` int(11) NOT NULL DEFAULT '0' COMMENT '活动规格|积分商城规格 id',
  `goods_sku_text` varchar(60) DEFAULT NULL COMMENT '规格名',
  `goods_title` varchar(255) DEFAULT NULL COMMENT '商品名称',
  `goods_image` varchar(255) DEFAULT NULL COMMENT '商品图片',
  `goods_original_price` decimal(10,2) NOT NULL COMMENT '商品原价',
  `discount_fee` decimal(10,2) DEFAULT NULL COMMENT '优惠费用',
  `goods_price` decimal(10,2) NOT NULL COMMENT '商品价格',
  `goods_num` int(11) NOT NULL DEFAULT '0' COMMENT '购买数量',
  `goods_weight` int(11) NOT NULL DEFAULT '0' COMMENT '商品重量',
  `pay_price` decimal(10,2) NOT NULL COMMENT '支付金额(不含运费)',
  `dispatch_status` tinyint(2) NOT NULL DEFAULT '0' COMMENT '发货状态:0=未发货,1=已发货,2=已收货',
  `dispatch_fee` decimal(10,2) DEFAULT NULL COMMENT '发货费用',
  `dispatch_type` varchar(20) DEFAULT NULL COMMENT '发货方式',
  `dispatch_id` int(11) DEFAULT NULL COMMENT '发货模板',
  `store_id` int(11) NOT NULL DEFAULT '0' COMMENT '门店',
  `aftersale_status` tinyint(2) NOT NULL COMMENT '售后状态:-1=拒绝,0=未申请,1=申请售后,2=售后完成',
  `comment_status` tinyint(2) NOT NULL COMMENT '评价状态:0=未评价,1=已评价',
  `refund_status` tinyint(1) DEFAULT NULL COMMENT '退款状态:-1=拒绝退款,0=无,1=申请中,2=同意',
  `refund_fee` decimal(10,2) DEFAULT NULL COMMENT '退款金额',
  `refund_msg` varchar(255) DEFAULT NULL COMMENT '退款原因',
  `express_name` varchar(60) DEFAULT NULL COMMENT '快递公司',
  `express_code` varchar(60) DEFAULT NULL COMMENT '快递公司编号',
  `express_no` varchar(60) DEFAULT NULL COMMENT '快递单号',
  `ext` varchar(2048) DEFAULT NULL COMMENT '附加字段',
  `createtime` bigint(16) DEFAULT NULL COMMENT '添加时间',
  `updatetime` bigint(16) DEFAULT NULL COMMENT '更新时间',
  `deletetime` bigint(16) DEFAULT NULL COMMENT '删除时间',
  PRIMARY KEY (`id`) USING BTREE,
  KEY `order_id` (`order_id`) USING BTREE,
  KEY `store_id` (`store_id`) USING BTREE,
  KEY `activity_id` (`activity_id`) USING BTREE,
  KEY `goods_id` (`goods_id`) USING BTREE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci COMMENT='订单商品明细';

CREATE TABLE IF NOT EXISTS `__PREFIX__refund_log` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `order_sn` varchar(45) DEFAULT NULL COMMENT '商户订单号',
  `refund_sn` varchar(45) DEFAULT NULL COMMENT '商户退款单号',
  `order_item_id` varchar(45) DEFAULT NULL COMMENT '订单商品',
  `pay_fee` decimal(10,2) DEFAULT NULL COMMENT '支付金额',
  `refund_fee` decimal(10,2) DEFAULT NULL COMMENT '退款金额',
  `pay_type` varchar(20) NOT NULL DEFAULT '' COMMENT '付款方式',
  `status` tinyint(1) DEFAULT '0' COMMENT '退款状态:0=退款中,1=退款完成,-1=退款失败',
  `payment_json` varchar(1024) DEFAULT NULL COMMENT '退款原始数据',
  `createtime` bigint(16) DEFAULT NULL COMMENT '创建时间',
  `updatetime` bigint(16) DEFAULT NULL COMMENT '更新时间',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci COMMENT='退款日志';

CREATE TABLE IF NOT EXISTS `__PREFIX__store` (
  `id` int(11) NOT NULL AUTO_INCREMENT COMMENT 'ID',
  `name` varchar(50) NOT NULL COMMENT '门店名称',
  `images` varchar(2500) NOT NULL COMMENT '门店图片',
  `realname` varchar(50) NOT NULL COMMENT '联系人',
  `phone` varchar(20) NOT NULL COMMENT '联系电话',
  `province_name` varchar(50) NOT NULL COMMENT '省',
  `city_name` varchar(50) NOT NULL COMMENT '市',
  `area_name` varchar(50) NOT NULL COMMENT '区',
  `province_id` int(11) NOT NULL COMMENT '省ID',
  `city_id` int(11) NOT NULL COMMENT '市ID',
  `area_id` int(11) NOT NULL COMMENT '区ID',
  `address` varchar(255) NOT NULL COMMENT '详细地址',
  `latitude` decimal(10,6) DEFAULT NULL COMMENT '纬度',
  `longitude` decimal(10,6) DEFAULT NULL COMMENT '经度',
  `store` enum('0','1') NOT NULL DEFAULT '0' COMMENT '支持配送:0=否,1=是',
  `selfetch` enum('0','1') NOT NULL DEFAULT '0' COMMENT '支持自提:0=否,1=是',
  `service_type` varchar(20) NOT NULL COMMENT '服务范围',
  `service_radius` int(11) NOT NULL DEFAULT '0' COMMENT '服务半径',
  `service_province_ids` varchar(1200) DEFAULT NULL COMMENT '服务行政省',
  `service_city_ids` varchar(1200) DEFAULT NULL COMMENT '服务行政市',
  `service_area_ids` varchar(1200) DEFAULT NULL COMMENT '服务行政区',
  `openhours` varchar(20) NOT NULL COMMENT '营业时间',
  `openweeks` set('1','2','3','4','5','6','7') NOT NULL DEFAULT '1,2,3,4,5,6,7' COMMENT '营业天数',
  `status` enum('0','1') NOT NULL DEFAULT '1' COMMENT '门店状态:0=禁用,1=启用',
  `createtime` bigint(16) NOT NULL COMMENT '创建时间',
  `updatetime` bigint(16) NOT NULL COMMENT '更新时间',
  `deletetime` bigint(16) DEFAULT NULL COMMENT '删除时间',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci COMMENT='门店';

CREATE TABLE IF NOT EXISTS `__PREFIX__user_address` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `is_default` enum('0','1') DEFAULT '0' COMMENT '默认',
  `user_id` int(11) DEFAULT NULL COMMENT '用户',
  `consignee` varchar(20) DEFAULT NULL COMMENT '收货人',
  `phone` varchar(20) DEFAULT NULL COMMENT '联系电话',
  `province_name` varchar(20) DEFAULT NULL COMMENT '省',
  `city_name` varchar(20) DEFAULT NULL COMMENT '市',
  `area_name` varchar(20) DEFAULT NULL COMMENT '区',
  `address` varchar(255) DEFAULT NULL COMMENT '详细地址',
  `province_id` int(11) DEFAULT NULL,
  `city_id` int(11) DEFAULT NULL,
  `area_id` int(11) DEFAULT NULL,
  `latitude` decimal(10,6) DEFAULT NULL COMMENT '纬度',
  `longitude` decimal(10,6) DEFAULT NULL COMMENT '经度',
  `createtime` bigint(16) DEFAULT NULL,
  `updatetime` bigint(16) DEFAULT NULL,
  `deletetime` bigint(16) DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci COMMENT='用户地址';

CREATE TABLE IF NOT EXISTS `__PREFIX__user_favorite` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `user_id` int(11) DEFAULT NULL COMMENT '用户',
  `goods_id` int(11) DEFAULT NULL COMMENT '商品',
  `createtime` bigint(16) DEFAULT NULL,
  `updatetime` bigint(16) DEFAULT NULL,
  `deletetime` bigint(16) DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci COMMENT='用户收藏';

CREATE TABLE IF NOT EXISTS `__PREFIX__article` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT 'ID',
  `admin_id` int(10) NOT NULL DEFAULT '0' COMMENT '管理员ID',
  `category_id` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '分类ID(单选)',
  `flag` set('hot','index','recommend') COLLATE utf8mb4_general_ci NOT NULL DEFAULT '' COMMENT '标志(多选):hot=热门,index=首页,recommend=推荐',
  `title` varchar(50) COLLATE utf8mb4_general_ci NOT NULL DEFAULT '' COMMENT '标题',
  `content` text COLLATE utf8mb4_general_ci NOT NULL COMMENT '内容',
  `image` varchar(100) COLLATE utf8mb4_general_ci NOT NULL DEFAULT '' COMMENT '图片',
  `images` varchar(1500) COLLATE utf8mb4_general_ci NOT NULL DEFAULT '' COMMENT '图片组',
  `attachfile` varchar(100) COLLATE utf8mb4_general_ci NOT NULL DEFAULT '' COMMENT '附件',
  `keywords` varchar(100) COLLATE utf8mb4_general_ci NOT NULL DEFAULT '' COMMENT '关键字',
  `description` varchar(255) COLLATE utf8mb4_general_ci NOT NULL DEFAULT '' COMMENT '描述',
  `views` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '点击',
  `createtime` bigint(16) DEFAULT NULL COMMENT '创建时间',
  `updatetime` bigint(16) DEFAULT NULL COMMENT '更新时间',
  `deletetime` bigint(16) DEFAULT NULL COMMENT '删除时间',
  `weigh` int(10) NOT NULL DEFAULT '0' COMMENT '权重',
  `status` enum('normal','hidden') COLLATE utf8mb4_general_ci DEFAULT 'normal' COMMENT '状态',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci COMMENT='文章表';

CREATE TABLE IF NOT EXISTS `__PREFIX__brand` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT 'ID',
  `admin_id` int(10) NOT NULL DEFAULT '0' COMMENT '管理员ID',
  `shop_id` int(10) NOT NULL DEFAULT '0' COMMENT '商家ID',
  `category_id` varchar(100) COLLATE utf8mb4_general_ci NOT NULL DEFAULT '' COMMENT '分类ID',
  `name` varchar(50) COLLATE utf8mb4_general_ci NOT NULL DEFAULT '' COMMENT '品牌名',
  `image` varchar(100) COLLATE utf8mb4_general_ci NOT NULL DEFAULT '' COMMENT '图片',
  `content` text COLLATE utf8mb4_general_ci NOT NULL COMMENT '内容介绍',
  `weigh` int(10) NOT NULL DEFAULT '0' COMMENT '权重',
  `switch` tinyint(1) NOT NULL DEFAULT '0' COMMENT '是否启用',
  `createtime` bigint(16) DEFAULT NULL COMMENT '创建时间',
  `updatetime` bigint(16) DEFAULT NULL COMMENT '更新时间',
  `deletetime` bigint(16) DEFAULT NULL COMMENT '删除时间',
  `status` enum('normal','hidden') COLLATE utf8mb4_general_ci NOT NULL DEFAULT 'normal' COMMENT '状态',
  `state` enum('0','1') COLLATE utf8mb4_general_ci NOT NULL DEFAULT '0' COMMENT '状态值:0=审核中,1=已审核',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci COMMENT='品牌表';

CREATE TABLE IF NOT EXISTS `__PREFIX__complaint` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT 'ID',
  `type` enum('0','1','2') COLLATE utf8mb4_general_ci NOT NULL COMMENT '举报类型:0=用户举报,1=商品举报,2=店铺举报',
  `user_id` int(10) NOT NULL DEFAULT '0' COMMENT '举报人',
  `complaint_user_id` int(10) unsigned DEFAULT '0' COMMENT '被举报会员ID',
  `complaint_shop_id` int(10) unsigned DEFAULT '0' COMMENT '被举报店铺ID',
  `complaint_goods_id` int(10) unsigned DEFAULT '0' COMMENT '被举报商品ID',
  `content` text COLLATE utf8mb4_general_ci NOT NULL COMMENT '内容',
  `images` varchar(1500) COLLATE utf8mb4_general_ci NOT NULL DEFAULT '' COMMENT '图片组',
  `reason` enum('0','1','2','3','4','5','6','7','8','9','10','11','12','13') COLLATE utf8mb4_general_ci NOT NULL COMMENT '举报理由:0=虚假交易,1=诈骗欺诈,2=收到空包裹,3=假冒盗版,4=泄露信息,5=违禁物品,6=未按成交价交易,7=未按约定时间发货,8=垃圾营销,9=涉黄信息,10=不实信息,11=人身攻击,12=违法信息,13=诈骗信息',
  `receipt` text COLLATE utf8mb4_general_ci COMMENT '处理回执',
  `createtime` bigint(16) DEFAULT NULL COMMENT '创建时间',
  `updatetime` bigint(16) DEFAULT NULL COMMENT '更新时间',
  `deletetime` bigint(16) DEFAULT NULL COMMENT '删除时间',
  `state` enum('normal','hidden') COLLATE utf8mb4_general_ci NOT NULL DEFAULT 'normal' COMMENT '状态:normal=未受理,hidden=已受理',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci COMMENT='举报表';

CREATE TABLE IF NOT EXISTS `__PREFIX__coupons` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT 'ID',
  `shop_id` int(10) NOT NULL DEFAULT '0' COMMENT '管理员ID',
  `type` enum('reduction','discount','shipping','vip') COLLATE utf8mb4_general_ci NOT NULL DEFAULT 'reduction' COMMENT '优惠券类型:reduction=满减券,discount=折扣券,shipping=包邮券,vip=会员赠券',
  `name` varchar(50) COLLATE utf8mb4_general_ci NOT NULL DEFAULT '' COMMENT '名称',
  `userlevel` int(10) unsigned DEFAULT '0' COMMENT '会员等级',
  `usertype` enum('reduction','discount') COLLATE utf8mb4_general_ci DEFAULT 'reduction' COMMENT '赠券类型:reduction=满减券,discount=折扣券',
  `price` decimal(10,2) unsigned DEFAULT '0.00' COMMENT '面值',
  `discount` decimal(2,1) unsigned DEFAULT '0.0' COMMENT '折扣率',
  `limit` decimal(10,2) unsigned NOT NULL DEFAULT '0.00' COMMENT '消费限制',
  `rangetype` enum('all','goods','category') COLLATE utf8mb4_general_ci NOT NULL DEFAULT 'all' COMMENT '可用范围:all=全部商品,goods=指定商品,category=指定分类',
  `range` varchar(100) COLLATE utf8mb4_general_ci DEFAULT '' COMMENT '范围',
  `pretype` enum('appoint','fixed') COLLATE utf8mb4_general_ci NOT NULL DEFAULT 'appoint' COMMENT '时效类型:appoint=领后天数,fixed=固定时间',
  `validity` int(10) unsigned DEFAULT '0' COMMENT '有效天数',
  `startdate` date DEFAULT NULL COMMENT '开始日期',
  `enddate` date DEFAULT NULL COMMENT '结束时间',
  `drawlimit` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '领取限制',
  `grant` varchar(10) COLLATE utf8mb4_general_ci NOT NULL DEFAULT '-1' COMMENT '发放总数量',
  `alreadygrant` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '已领取数量',
  `surplus` int(10) unsigned DEFAULT '0' COMMENT '剩余数量',
  `content` text COLLATE utf8mb4_general_ci COMMENT '使用说明',
  `usenum` int(10) unsigned DEFAULT '0' COMMENT '已使用数量',
  `invalid` int(10) unsigned DEFAULT '0' COMMENT '是否失效',
  `createtime` bigint(16) DEFAULT NULL COMMENT '创建时间',
  `updatetime` bigint(16) DEFAULT NULL COMMENT '更新时间',
  `deletetime` bigint(16) DEFAULT NULL COMMENT '删除时间',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci COMMENT='卡券表';

CREATE TABLE IF NOT EXISTS `__PREFIX__groups` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT 'ID',
  `group_no` varchar(32) COLLATE utf8mb4_general_ci NOT NULL COMMENT '拼团号',
  `user_id` int(10) NOT NULL DEFAULT '0' COMMENT '团长ID',
  `shop_id` int(10) NOT NULL DEFAULT '0' COMMENT '所属商家',
  `goods_id` int(10) NOT NULL DEFAULT '0' COMMENT '所属商品',
  `group_type` enum('alone','group','ladder') COLLATE utf8mb4_general_ci NOT NULL COMMENT '拼团类型:alone=直购,group=拼团,ladder=阶梯拼团',
  `is_ladder` tinyint(1) NOT NULL DEFAULT '0' COMMENT '是否阶梯拼团',
  `ladder_id` int(10) NOT NULL DEFAULT '0' COMMENT '阶梯ID',
  `people_num` int(10) NOT NULL DEFAULT '0' COMMENT '成团人数',
  `join_num` int(10) NOT NULL DEFAULT '0' COMMENT '参团人数',
  `state` enum('ready','start','success','fail','auto') COLLATE utf8mb4_general_ci NOT NULL DEFAULT 'ready' COMMENT '拼团状态:ready=准备中,start=拼团中,success=已成团,fail=拼团失败,auto=自动成团',
  `createtime` bigint(16) DEFAULT NULL COMMENT '开团时间',
  `grouptime` bigint(16) DEFAULT NULL COMMENT '成团时间',
  `validitytime` bigint(16) DEFAULT NULL COMMENT '有效时间',
  `updatetime` bigint(16) DEFAULT NULL COMMENT '更新时间',
  `deletetime` bigint(16) DEFAULT NULL COMMENT '删除时间',
  `status` enum('normal','hidden') COLLATE utf8mb4_general_ci DEFAULT 'normal' COMMENT '状态',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci COMMENT='拼团表';

CREATE TABLE IF NOT EXISTS `__PREFIX__notice` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT 'ID',
  `user_id` int(10) DEFAULT '0' COMMENT '用户ID',
  `shop_id` int(10) unsigned DEFAULT '0' COMMENT '店铺ID',
  `image` varchar(200) COLLATE utf8mb4_general_ci NOT NULL DEFAULT '' COMMENT '图片',
  `title` varchar(50) COLLATE utf8mb4_general_ci NOT NULL DEFAULT '' COMMENT '消息标题',
  `come` varchar(50) COLLATE utf8mb4_general_ci NOT NULL DEFAULT '' COMMENT '来自哪里',
  `content` text COLLATE utf8mb4_general_ci COMMENT '消息内容',
  `type` enum('order','notice') COLLATE utf8mb4_general_ci NOT NULL COMMENT '分类',
  `modules` varchar(50) COLLATE utf8mb4_general_ci NOT NULL DEFAULT '' COMMENT '类型:order=订单,refund=退款,groupsorder=拼团订单,groupsrefund=拼团退款,live=直播,goods=商品',
  `modules_id` int(10) unsigned DEFAULT '0' COMMENT '所属ID',
  `createtime` bigint(16) DEFAULT NULL COMMENT '创建时间',
  `updatetime` bigint(16) DEFAULT NULL COMMENT '更新时间',
  `deletetime` bigint(16) DEFAULT NULL COMMENT '删除时间',
  `status` enum('normal','hidden') COLLATE utf8mb4_general_ci NOT NULL DEFAULT 'normal' COMMENT '状态',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci COMMENT='消息表';

CREATE TABLE IF NOT EXISTS `__PREFIX__pay` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT 'ID',
  `pay_no` varchar(32) COLLATE utf8mb4_general_ci NOT NULL COMMENT '交易号',
  `trade_no` varchar(32) COLLATE utf8mb4_general_ci DEFAULT '' COMMENT '交易订单号',
  `user_id` int(10) NOT NULL DEFAULT '0' COMMENT '用户ID',
  `shop_id` int(10) NOT NULL DEFAULT '0' COMMENT '用户ID',
  `order_id` int(10) NOT NULL DEFAULT '0' COMMENT '订单ID',
  `order_no` varchar(18) COLLATE utf8mb4_general_ci NOT NULL COMMENT '订单号',
  `pay_type` enum('0','1','2') COLLATE utf8mb4_general_ci NOT NULL DEFAULT '0' COMMENT '支付类型:0=余额支付,1=微信支付,2=支付宝支付',
  `pay_state` enum('0','1','2') COLLATE utf8mb4_general_ci NOT NULL DEFAULT '0' COMMENT '支付状态 (支付回调):0=未支付,1=已支付,2=已退款',
  `type` enum('goods','groups') COLLATE utf8mb4_general_ci NOT NULL DEFAULT 'goods' COMMENT '订单类型:goods=商品订单,groups=拼团订单',
  `number` int(10) NOT NULL DEFAULT '0' COMMENT '总数',
  `price` decimal(10,2) unsigned NOT NULL DEFAULT '0.00' COMMENT '支付金额',
  `order_price` decimal(10,2) unsigned NOT NULL DEFAULT '0.00' COMMENT '订单金额',
  `freight_price` decimal(10,2) unsigned NOT NULL DEFAULT '0.00' COMMENT '快递金额',
  `coupon_price` decimal(10,2) unsigned NOT NULL DEFAULT '0.00' COMMENT '优惠券金额',
  `discount_price` decimal(10,2) unsigned NOT NULL DEFAULT '0.00' COMMENT '优惠金额',
  `refund_price` decimal(10,2) unsigned NOT NULL DEFAULT '0.00' COMMENT '退款金额',
  `actual_payment` decimal(10,2) unsigned NOT NULL DEFAULT '0.00' COMMENT '实际支付',
  `total_amount` decimal(10,2) unsigned DEFAULT '0.00' COMMENT '总金额',
  `notice` text COLLATE utf8mb4_general_ci COMMENT '通知内容',
  `createtime` bigint(16) DEFAULT NULL COMMENT '创建时间',
  `updatetime` bigint(16) DEFAULT NULL COMMENT '更新时间',
  `deletetime` bigint(16) DEFAULT NULL COMMENT '删除时间',
  `status` enum('normal','hidden') COLLATE utf8mb4_general_ci DEFAULT 'normal' COMMENT '状态',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci COMMENT='订单支付表';

CREATE TABLE IF NOT EXISTS `__PREFIX__record` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT 'ID',
  `user_id` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '用户ID',
  `shop_id` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '店铺ID',
  `goods_id` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '商品ID',
  `goods_type` enum('goods','groups','seckill') COLLATE utf8mb4_general_ci DEFAULT 'goods' COMMENT '商品类型:goods=普通商品,groups=拼团商品,seckill=秒杀商品',
  `category_id` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '类目ID',
  `category_pid` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '类目父ID',
  `uuid` varchar(36) COLLATE utf8mb4_general_ci NOT NULL COMMENT 'app唯一编码',
  `ip` varchar(50) COLLATE utf8mb4_general_ci DEFAULT NULL COMMENT '设备ip',
  `views` int(64) NOT NULL DEFAULT '1' COMMENT '点击',
  `createtime` bigint(16) DEFAULT NULL COMMENT '创建时间',
  `updatetime` bigint(16) DEFAULT NULL COMMENT '更新时间',
  `deletetime` bigint(16) DEFAULT NULL COMMENT '删除时间',
  `status` enum('normal','hidden') COLLATE utf8mb4_general_ci DEFAULT 'normal' COMMENT '状态',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci COMMENT='日志记录';

CREATE TABLE IF NOT EXISTS `__PREFIX__search` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT 'ID',
  `keywords` varchar(50) COLLATE utf8mb4_general_ci NOT NULL DEFAULT '' COMMENT '关键字',
  `flag` set('hot','index','recommend') COLLATE utf8mb4_general_ci NOT NULL DEFAULT '' COMMENT '推荐位 :hot=系统热门,index=搜索条,recommend=推荐',
  `views` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '搜索次数',
  `createtime` bigint(16) DEFAULT NULL COMMENT '创建时间',
  `updatetime` bigint(16) DEFAULT NULL COMMENT '更新时间',
  `deletetime` bigint(16) DEFAULT NULL COMMENT '删除时间',
  `weigh` int(10) NOT NULL DEFAULT '0' COMMENT '权重',
  `switch` tinyint(1) NOT NULL DEFAULT '0' COMMENT '开关',
  `status` enum('normal','hidden') COLLATE utf8mb4_general_ci DEFAULT 'normal' COMMENT '状态',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci COMMENT='搜索表';

CREATE TABLE IF NOT EXISTS `__PREFIX__shop` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT 'ID',
  `user_id` int(10) unsigned DEFAULT '0' COMMENT '会员ID',
  `shopname` varchar(32) COLLATE utf8mb4_general_ci NOT NULL DEFAULT '' COMMENT '店铺名称',
  `keywords` varchar(100) COLLATE utf8mb4_general_ci NOT NULL DEFAULT '' COMMENT '关键字',
  `description` varchar(255) COLLATE utf8mb4_general_ci NOT NULL DEFAULT '' COMMENT '描述',
  `service_ids` varchar(100) COLLATE utf8mb4_general_ci DEFAULT '' COMMENT '服务(多选)',
  `avatar` varchar(255) COLLATE utf8mb4_general_ci NOT NULL DEFAULT '' COMMENT '店铺头像',
  `state` enum('0','1','2') COLLATE utf8mb4_general_ci NOT NULL DEFAULT '1' COMMENT '店铺类型:0=个人,1=企业,2=旗舰',
  `level` tinyint(1) unsigned NOT NULL DEFAULT '0' COMMENT '店铺等级',
  `islive` tinyint(1) NOT NULL DEFAULT '0' COMMENT '直播权限',
  `isself` tinyint(1) NOT NULL DEFAULT '0' COMMENT '是否自营',
  `bio` text COLLATE utf8mb4_general_ci NOT NULL COMMENT '店铺简介',
  `city` varchar(100) COLLATE utf8mb4_general_ci NOT NULL DEFAULT '' COMMENT '省市',
  `return` varchar(100) COLLATE utf8mb4_general_ci NOT NULL DEFAULT '' COMMENT '退货地址',
  `like` int(10) NOT NULL DEFAULT '0' COMMENT '收藏/喜欢',
  `score_describe` float(3,1) NOT NULL DEFAULT '0.0' COMMENT '宝贝描述',
  `score_service` float(3,1) NOT NULL DEFAULT '0.0' COMMENT '卖家服务',
  `score_deliver` float(3,1) NOT NULL DEFAULT '0.0' COMMENT '发货相符',
  `score_logistics` float(3,1) NOT NULL DEFAULT '0.0' COMMENT '物流服务',
  `weigh` int(10) NOT NULL DEFAULT '0' COMMENT '权重',
  `verify` enum('0','1','2','3','4') COLLATE utf8mb4_general_ci NOT NULL DEFAULT '0' COMMENT '审核:0=提交资质,1=提交店铺,2=提交审核,3=通过,4=未通过',
  `createtime` bigint(16) DEFAULT NULL COMMENT '创店时间',
  `updatetime` bigint(16) DEFAULT NULL COMMENT '更新时间',
  `deletetime` bigint(16) DEFAULT NULL COMMENT '删除时间',
  `status` enum('normal','hidden') COLLATE utf8mb4_general_ci DEFAULT 'normal' COMMENT '状态',
  PRIMARY KEY (`id`) USING BTREE,
  KEY `shopname` (`shopname`) USING BTREE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci COMMENT='店铺表';

CREATE TABLE IF NOT EXISTS `__PREFIX__version` (
  `id` int(32) NOT NULL AUTO_INCREMENT COMMENT '客户端版本号',
  `title` varchar(32) COLLATE utf8mb4_general_ci NOT NULL DEFAULT '' COMMENT '版本标题',
  `versionName` varchar(32) COLLATE utf8mb4_general_ci NOT NULL DEFAULT '' COMMENT '版本名称',
  `versionCode` int(10) NOT NULL DEFAULT '100' COMMENT '版本号',
  `content` text COLLATE utf8mb4_general_ci NOT NULL COMMENT '升级内容',
  `androidLink` varchar(500) COLLATE utf8mb4_general_ci DEFAULT '' COMMENT '安卓升级文件',
  `iosLink` varchar(500) COLLATE utf8mb4_general_ci DEFAULT '' COMMENT 'IOS升级文件',
  `type` enum('base','alpha','beta','rc','release') COLLATE utf8mb4_general_ci NOT NULL DEFAULT 'beta' COMMENT '版本类型:base=结构版,alpha=内测版,beta=公测版,rc=终测版,release=正式版',
  `enforce` tinyint(1) unsigned NOT NULL DEFAULT '0' COMMENT '强制更新',
  `createtime` bigint(16) NOT NULL DEFAULT '0' COMMENT '创建时间',
  `updatetime` bigint(16) unsigned NOT NULL DEFAULT '0' COMMENT '更新时间',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci COMMENT='版本升级表';